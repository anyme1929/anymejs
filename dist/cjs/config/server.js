"use strict";var e=require("routing-controllers");module.exports=class{constructor(s,r,i){this.app=i,this.server=null,this.pending=null,e.useContainer(r),this.app=e.useExpressServer(i,s)}async bootstrap(e){return this.pending||(this.pending=new Promise((s,r)=>{if(this.server?.listening)throw new Error("Server already running");this.server=this.app.listen(e,e=>{e?r(e):s(this.server),this.pending=null})})),this.pending}async close(){if(this.pending&&await this.pending,this.server?.listening)return new Promise((e,s)=>{this.server.close(r=>{r?s(r):(this.server=null,e())})})}};
//# sourceMappingURL=server.js.map
