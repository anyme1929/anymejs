{"version":3,"file":"session-ioredis.js","sources":["../../../src/utils/session-ioredis.ts"],"sourcesContent":[null],"names":["optionalCb","err","data","cb","RedisStore","Store","constructor","opts","super","this","prefix","scanCount","serializer","JSON","ttl","disableTTL","disableTouch","client","get","sid","key","parse","set","sess","getTTL","val","stringify","setex","destroy","touch","expire","del","clear","keys","getAllKeys","length","ids","len","map","k","substring","all","mget","reduce","acc","raw","idx","id","push","cookie","expires","ms","Number","Date","now","Math","ceil","pattern","Set","cursor","newCursor","scan","forEach","add","size","Array","from"],"mappings":"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"}