"use strict";var e,s,r=require("./node_modules/.pnpm/@rollup_plugin-typescript@1_4cb859db7663cf55b6eaf4302f855b65/node_modules/tslib/tslib.es6.js"),o=require("node:path"),t=require("node:url"),n=require("fast-glob"),i=require("./utils/index.js");e=new WeakMap,s=new WeakMap,exports.CoreConfig=class{constructor(){e.set(this,process.env.CONFIG_PATH||"./app.config.{ts,js,json}"),s.set(this,{public_path:"public",port:parseInt(process.env.PORT||"3000"),node_env:process.env.NODE_ENV||"development",is_dev:"development"===process.env.NODE_ENV,api_prefix:process.env.API_PREFIX||"",db:{enable:!1,client:{type:"mysql",host:process.env.DB_HOST||"localhost",port:parseInt(process.env.DB_PORT||"3306"),username:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"",database:process.env.DB_NAME||"",entities:[o.resolve("src/models/**/*{.ts,.js}")],migrations:[o.resolve("src/migrations/**/*{.ts,.js}")],poolSize:parseInt(process.env.DB_POOL_SIZE||"10"),synchronize:!1,logging:"development"===process.env.NODE_ENV}},redis:{enable:!1,client:{name:process.env.REDIS_MASTER_NAME||"mymaster",password:process.env.REDIS_PASSWORD||"",db:parseInt(process.env.REDIS_DB||"0"),lazyConnect:!0,sentinels:[{host:process.env.REDIS_SENTINEL_HOST||"localhost",port:parseInt(process.env.REDIS_SENTINEL_PORT||"26379")}]}},session:{enable:!0,prefix:process.env.SESSION_PREFIX||"session:",type:"memory",client:{secret:process.env.SESSION_SECRET||"session",resave:!1,saveUninitialized:!1,cookie:{secure:"production"===process.env.NODE_ENV,httpOnly:!0,maxAge:36e5}}},router:{cors:{origin:process.env.CORS_ORIGIN||"*",methods:process.env.CORS_METHODS||"GET,POST,PUT,DELETE,OPTIONS",credentials:!1},routePrefix:process.env.API_PREFIX||"",controllers:[o.resolve("src/controllers/**/*{.ts,.js}")],middlewares:[o.resolve("src/middlewares/**/*{.ts,.js}")],interceptors:[o.resolve("src/interceptors/**/*{.ts,.js}")]},https:{enable:!1,options:{port:parseInt(process.env.HTTPS_PORT||"443"),key:o.resolve(process.env.HTTPS_KEY||"key.pem"),cert:o.resolve(process.env.HTTPS_CERT||"cert.pem")}}})}async loadConfig(o){const t=await n(o||r.__classPrivateFieldGet(this,e,"f"),{onlyFiles:!0,ignore:["**/node_modules/**","**/dist/**"],absolute:!0});return i.isEmpty(t)||await this.setConfig(t[0]),r.__classPrivateFieldGet(this,s,"f")}async setConfig(e){try{const o=await this.resolve(e);r.__classPrivateFieldSet(this,s,i.deepMerge(r.__classPrivateFieldGet(this,s,"f"),o),"f")}catch(s){throw console.error(`Error loading config file ${e}:`,s),s}}async resolve(e){if("undefined"==typeof require){const s=t.pathToFileURL(e).toString();let r=await import(s);return r=r?.default?.__esModule?r.default:r,r?.default||r}{const s=require(e);return s?.__esModule&&s.default?s.default:s}}get config(){return r.__classPrivateFieldGet(this,s,"f")}};
//# sourceMappingURL=core.config.js.map
